<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606642 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="741"/>

<div>
<span><div>IOC 操作 Bean 管理(基于注解方式)</div><div>1、什么是注解 </div><div>（1）注解是代码特殊标记，格式：@注解名称(属性名称=属性值, 属性名称=属性值..) </div><div>（2）使用注解，注解作用在类上面，方法上面，属性上面 </div><div>（3）使用注解目的：简化 xml 配置</div><div> 2、Spring 针对 Bean 管理中创建对象提供注解 </div><div>（1）@Component </div><div>（2）@Service </div><div>（3）@Controller </div><div>（4）@Repository </div><div>* 上面四个注解功能是一样的，都可以用来创建 bean 实例</div><div><br/></div><div>3、基于注解方式实现对象创建 </div><div>第一步 引入依赖</div><div><img src="IOC 操作 Bean 管理(基于注解方式)_files/Image.png" type="image/png" data-filename="Image.png"/></div><div>第二步 开启组件扫描</div><div><img src="IOC 操作 Bean 管理(基于注解方式)_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div>&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div>       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div>       xmlns:context= &quot;http://www.springframework.org/schema/context&quot;</div><div>       xsi:schemaLocation=&quot;http://www.springframework.org/schema/context</div><div>       http://www.springframework.org/schema/context/spring-context.xsd</div><div>       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</div><div><br/></div><div><br/></div><div>    &lt;context:component-scan base-package=&quot;com.yht&quot;&gt;</div><div><br/></div><div>    &lt;/context:component-scan&gt;</div><div>&lt;/beans&gt;</div><div><br/></div><div><br/></div><div>@Component</div><div>@Repository</div><div>@Service</div><div>@Controller(value = &quot;userDaoImpl&quot;)</div><div>//在注解里面，value属性值可以不写</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">//默认的是类名，第一个字母小写 </span></div><div>public class UserDaoImpl implements UserDao {</div><div>    @Override</div><div>    public void add() {</div><div>        System.out.println(&quot;userImpl add()....... &quot;);</div><div>    }</div><div>}</div><div><br/></div><div>@Test</div><div>public void testAutoUserDao() {</div><div>    ClassPathXmlApplicationContext context = new</div><div>            ClassPathXmlApplicationContext(&quot;auto1.xml&quot;);</div><div><br/></div><div><br/></div><div>    UserDaoImpl autoProperty = context.getBean(&quot;userDaoImpl&quot;, UserDaoImpl.class);</div><div>    autoProperty.add();</div><div>}</div></div><div><br/></div><div>4、开启组件扫描细节配置</div><div><img src="IOC 操作 Bean 管理(基于注解方式)_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;context:component-scan base-package=&quot;com.yht&quot; use-default-filters=&quot;false&quot;&gt;</div><div><span>    //就只会扫描@</span>Controller注解的类<br/></div><div>    &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</div><div>&lt;/context:component-scan&gt;</div></div><div><br/></div><div><img src="IOC 操作 Bean 管理(基于注解方式)_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;context:component-scan base-package=&quot;com.yht.auto&quot;&gt;</div><div>  //就不会扫描@Controller注解的类</div><div>    &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</div><div>&lt;/context:component-scan&gt;</div></div><div>5、基于注解方式实现属性注入 </div><div>（1）@Autowired：根据属性类型进行自动装配</div><div> 第一步 把 service 和 dao 对象创建，在 service 和 dao 类添加创建对象注解</div><div> 第二步 在 service 注入 dao 对象，在 service 类添加 dao 类型属性，在属性上面使用注解</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Repository</div><div>public class UserService {</div><div>    </div><div>    @Value(value = &quot;yht&quot;)</div><div>    String name;</div><div>    //定义userdao类型属性，不需要加set方法，加注解</div><div>    //@Qualifier(value = &quot;userDaoImpl1&quot;)</div><div>    //@Resource(name = &quot;userDaoImpl1&quot;)</div><div>    @Autowired</div><div>    UserDao userDao;</div><div><br/></div><div><br/></div><div>    public void add() {</div><div>        userDao.add();</div><div>        System.out.println(&quot;UserService---add()......&quot;+this.name);</div><div>    }</div><div>}</div><div><br/></div><div>@Test</div><div>public void testAutoUserService() {</div><div>    ClassPathXmlApplicationContext context = new</div><div>            ClassPathXmlApplicationContext(&quot;auto1.xml&quot;);</div><div><br/></div><div><br/></div><div>    UserService autoProperty = context.getBean(&quot;userService&quot;, UserService.class);</div><div>    autoProperty.add();</div><div>}</div></div><div>（2）@Qualifier：根据名称进行注入 </div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">这个@Qualifier 注解的使用，和上面@Autowired 一起使用</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//添加注入属性注解 </div><div>//根据类型进行注入</div><div>//根据名称进行注入 </div><div>@Autowired</div><div>@Qualifier(value = &quot;userDaoImpl1&quot;)</div><div>private UserDao userDao;</div></div><div>（3）@Resource：可以根据类型注入，可以根据名称注入 </div><div>//@Resource</div><div> //根据类型进行注入</div><div>//根据名称进行注入</div><div> @Resource(name = &quot;userDaoImpl1&quot;) </div><div> private UserDao userDao; （</div><div>4）@Value：注入普通类型属性 </div><div>@Value(value = &quot;abc&quot;) </div><div>private String name;</div><div><br/></div><div>6、完全注解开发 </div><div>（1）创建配置类，替代 xml 配置文件</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Configuration //作为配置类，替代 xml 配置文件</div><div>@ComponentScan(basePackages = {&quot;com.yht.auto&quot;})</div><div>//@ComponentScan(basePackages = {&quot;com.yht.auto&quot;})</div><div>public class MyConfig {</div><div>}</div><div><br/></div><div><br/></div><div>@Test</div><div>public void testAutoConfigClass() {</div><div>    ApplicationContext context1 = new</div><div>            AnnotationConfigApplicationContext(MyConfig.class);</div><div>    UserService autoProperty = context1.getBean(&quot;userService&quot;, UserService.class);</div><div>    autoProperty.add();</div><div>}</div></div><div><br/></div></span>
</div></body></html> 